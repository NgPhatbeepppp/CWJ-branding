@using Microsoft.AspNetCore.Http
@{
    // Lấy thông tin Controller hiện tại để xử lý Active Menu và Spacer
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();

    // Biến này chỉ dùng để ẩn/hiện Spacer (Khoảng trống) ở trang chủ
    bool isHomePage = string.Equals(currentController, "Home", StringComparison.OrdinalIgnoreCase)
                   && string.Equals(currentAction, "Index", StringComparison.OrdinalIgnoreCase);

    // Helper: Active State cho Menu
    string IsActive(string controller, string action = null)
    {
        if (string.Equals(currentController, controller, StringComparison.OrdinalIgnoreCase))
        {
            if (action == null || string.Equals(currentAction, action, StringComparison.OrdinalIgnoreCase))
            {
                return "text-brand-primary border-b-2 border-brand-primary pb-1";
            }
        }
        return "text-black hover:text-brand-primary";
    }
}

<header class="fixed top-0 left-0 right-0 z-50 bg-transparent backdrop-blur-[2px] transition-all duration-300">

    <div class="w-[92%] max-w-[1600px] h-32 mx-auto flex items-center justify-between px-4 md:px-6">

        <a href="/" class="flex-shrink-0">
            <img src="~/images/logo2.png" alt="Charles Wembley" class="h-[105px] w-auto object-contain brightness-0" />
        </a>

        @* UPDATE: 
           1. space-x-12 -> space-x-16 (Tăng khoảng cách menu) 
        *@
        <nav class="hidden lg:flex items-center space-x-16">
            @* UPDATE: 
               2. text-lg -> text-base (Giảm cỡ chữ xuống mức tiêu chuẩn) 
            *@
            <a href="/en/home" class="text-base font-heading font-bold transition-colors uppercase tracking-wide @IsActive("Home")">
                Home
            </a>
            <a href="/en/about-us" class="text-base font-heading font-bold transition-colors uppercase tracking-wide @IsActive("About")">
                About Us
            </a>
            <a href="/en/medical-solutions" class="text-base font-heading font-bold transition-colors uppercase tracking-wide @IsActive("Medical")">
                Medical
            </a>
            <a href="/en/fb-solutions" class="text-base font-heading font-bold transition-colors uppercase tracking-wide @IsActive("FbSolutions")">
                F&B
            </a>
            <a href="/en/news" class="text-base font-heading font-bold transition-colors uppercase tracking-wide @IsActive("News")">
                News
            </a>
            <a href="/en/contact" class="text-base font-heading font-bold transition-colors uppercase tracking-wide @IsActive("Contact")">
                Contact
            </a>
        </nav>

        <div class="flex items-center space-x-6">
            @* Cập nhật cỡ chữ cho phần switch ngôn ngữ luôn cho cân đối *@
            <div class="flex items-center text-base font-medium text-black divide-x divide-slate-300">
                <a href="?lang=en" class="px-3 hover:text-brand-primary text-brand-primary font-bold">EN</a>
                <a href="?lang=vi" class="px-3 hover:text-brand-primary">VI</a>
            </div>

            <button type="button" id="mobile-menu-btn" class="lg:hidden p-2 text-black hover:text-brand-primary focus:outline-none">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
    </div>

    @* Mobile Menu *@
    <div id="mobile-menu" class="hidden lg:hidden absolute top-32 left-0 w-full bg-white border-b border-gray-200 shadow-lg">
        <div class="px-6 py-4 space-y-4">
            <a href="/en/home" class="block text-base font-heading font-bold uppercase @IsActive("Home")">Home</a>
            <a href="/en/about-us" class="block text-base font-heading font-bold uppercase @IsActive("About")">About Us</a>
            <a href="/en/medical-solutions" class="block text-base font-heading font-bold uppercase @IsActive("Medical")">Medical</a>
            <a href="/en/fb-solutions" class="block text-base font-heading font-bold uppercase @IsActive("FbSolutions")">F&B</a>
            <a href="/en/news" class="block text-base font-heading font-bold uppercase @IsActive("News")">News</a>
            <a href="/en/contact" class="block text-base font-heading font-bold uppercase @IsActive("Contact")">Contact</a>
        </div>
    </div>
</header>

<div class="@(isHomePage ? "hidden" : "h-32")"></div>